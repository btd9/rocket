function Move(e){this._el=$(e.el),this._bindEvents()}function Popup(e){this._el=$(e.el),this._bindEvents()}function timer(){var e=new Date,t=new Date(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" 23:59:59"),s=t.getTime()-e.getTime();if(s>1){var i=parseInt(parseInt(s/1e3)/86400),d=parseInt((parseInt(s/1e3)-24*i*3600)/3600),l=parseInt(parseInt(parseInt(s/1e3)-24*i*3600-3600*d)/60),o=parseInt(parseInt(s/1e3)-24*i*3600-3600*d)-60*l;10>i&&(i="0"+i),10>d&&(d="0"+d),10>l&&(l="0"+l),10>o&&(o="0"+o),$(".js-hours").each(function(){$(this).text(d)}),$(".js-minutes").each(function(){$(this).text(l)}),$(".js-seconds").each(function(){$(this).text(o)}),setTimeout(timer,1e3)}}Move.prototype._bindEvents=function(){this._el.on("click",this._scrollWindow.bind(this))},Move.prototype._scrollWindow=function(e){e.preventDefault();var t=$(e.target).attr("href"),s=$(t).offset().top;$("body, html").animate({scrollTop:s},400,"swing")},Popup.prototype._bindEvents=function(){this._el.on("click",this._openPopup.bind(this)),$(".js-overlay, .js-close").on("click",this._closePopup.bind(this))},Popup.prototype._openPopup=function(e){e.preventDefault(),$(".popup").addClass("js-active")},Popup.prototype._closePopup=function(){$(".popup").removeClass("js-active")},function(e){e.fn.streetSuggestion=function(t,s,i,d){function l(i,d){e(n).val(d),e(t).val(i),e(r).hide(),e(n).removeClass("suggested"),e(n).blur(),s&&s(i,d)}var o,n=e(this),c="get_streets.php",r=e("<div class='suggestion'></div>").appendTo(n.parent());e(this).attr("autocomplete","off"),""==e(t).val()&&e(t).val(0),e(n).blur(function(){clearTimeout(o),setTimeout(function(){e(r).hide(),e(n).removeClass("suggested")},200),0==e(t).val()&&i&&i()}),e(n).focus(function(){setTimeout(function(){0==e(t).val()&&(i&&i(),e(n).keyup())},10)}),e(n).keyup(function(s){var d=s.keyCode||s.which;e(n).val().length>=3?38==d?e(r).children("div").hasClass("selected")?(e(r).children("div.selected").prev("div").addClass("selected"),e(r).children("div.selected:last").removeClass("selected"),e(r).children("div.selected").length<1&&(e(r).children("div:last").addClass("selected"),e(r).animate({scrollTop:e(r).attr("scrollHeight")})),e(r).children("div.selected").position().top<0&&e(r).animate({scrollTop:e(r).attr("scrollTop")-e(r).height()+e(r).children("div.selected").height()})):(e(r).children("div:last").addClass("selected"),e(r).animate({scrollTop:e(r).attr("scrollHeight")})):40==d?e(r).children("div").hasClass("selected")?(e(r).children("div.selected").next("div").addClass("selected"),e(r).children("div.selected:first").removeClass("selected"),e(r).children("div.selected").length<1&&(e(r).children("div:first").addClass("selected"),e(r).animate({scrollTop:0})),e(r).children("div.selected").position().top>e(r).height()-e(r).children("div.selected").height()&&e(r).animate({scrollTop:e(r).attr("scrollTop")+e(r).children("div.selected").position().top})):(e(r).children("div:first").addClass("selected"),e(r).animate({scrollTop:0})):37==d||39==d||36==d||35==d||33==d||34==d||9==d&&e(t).val()>0||13==d&&e(t).val()>0||(e(t).val(0),e(r).hide(),e(n).removeClass("suggested").removeClass("notfound"),i&&i(),clearTimeout(o),o=setTimeout(function(){e("body").css("cursor","wait"),e(r).load(c,{q:e(n).val()},function(t,s,i){if(t){if(e(r).children("div").mousemove(function(t){e(r).children("div").removeClass("selected"),e(this).addClass("selected")}),e(r).children("div").click(function(t){e(r).children("div").removeClass("selected"),e(this).addClass("selected"),l(e(r).children("div.selected").attr("street_id"),e(r).children("div.selected").text())}),1==e(r).children("div").length)return void e(r).children("div").click();e(r).show(),e(r).css("min-width",e(n).width()),e(r).css("top",e(n).position().top+e(n).outerHeight()-1),e(r).css("left",e(n).position().left),e(r).css("height","auto"),e(r).height()>300&&e(r).height(250),e(r).width()<e(n).width()&&e(r).width(e(n).width()),e(n).addClass("suggested")}else e(r).hide(),e(n).removeClass("suggested"),e(n).addClass("notfound");e("body").css("cursor","default")})},300)):(e(t).val(0),e(r).hide(),e(n).removeClass("suggested").removeClass("notfound"),i&&i())}),e(n).keydown(function(t){var s=t.keyCode||t.which;return"block"==e(r).css("display")&&13==s?(e(r).children("div").hasClass("selected")&&l(e(r).children("div.selected").attr("street_id"),e(r).children("div.selected").text()),t.preventDefault(),t.keyCode=0,t.returnValue=!1,!1):void 0}),initSettings=jQuery.extend({streetId:0,streetName:""},d),initSettings.streetId&&initSettings.streetName&&l(d.streetId,d.streetName)}}(jQuery),$(document).ready(function(){new Move({el:".js-move"}),new Popup({el:".js-popup"}),timer(),(new WOW).init(),$("#str_nm").streetSuggestion($("#str_id"),function(e,t){$("#dom_id").html('<option value="0">Дом</option>').load("get_houses.php",{street_id:e},function(){$("#dom_id").prop("disabled",!1),$("body").css("cursor","default")})},function(){$("#dom_id").prop("disabled",!0)})});